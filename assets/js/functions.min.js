$(window).on("load",function(){setInterval(function(){$("#loader-icon").toggleClass("rollIn rollOut")},1e3),setTimeout(function(){$("#loader").fadeOut(400,function(){$(this).remove()})},3e3),$("#content, #footer").fadeTo("slow",1),$(window).width()<992&&($("#options, #search").addClass("fixed-top"),$("#options").removeClass("p-3"),$("#searchInput, #compareInput").addClass("form-control-sm"),$("#search").find(".btn").addClass("btn-sm")),$(window).resize(function(){$(window).width()<=992?($("#options, #search").addClass("fixed-top"),$("#options").removeClass("p-3"),$("#searchInput, #compareInput").addClass("form-control-sm"),$("#search").find(".btn").addClass("btn-sm")):($("#options, #search").removeClass("fixed-top"),$("#options").addClass("p-3"),$("#searchInput, #compareInput").removeClass("form-control-sm"),$("#search").find(".btn").removeClass("btn-sm"))}),Popper.Defaults.modifiers.computeStyle.enabled=!1}),$(document).ready(function(){Vue.mixin({beforeCreate:function(){var e=[];$.ajax({url:"https://restcountries.eu/rest/v2/",dataType:"json",success:function(a){for(var r=0;r<a.length;r++)e.push(a[r])}}),this.$allCountryData=e}});var e=new Vue({el:"#content",data:()=>({country:{name:"Country",code:"Code",desc:"Enter a country name, code or capital city to display corresponding data.",flag:null,capital:"",region:"",subregion:"",area:"",borders:"",population:"",latlng:["",""],currencies:[""],languages:[""],timezones:"",wiki:!1},map:null,chartPop:null,chartArea:null,compareType:"Names",compareValue:"",compareNames:[],comparePops:[],compareAreas:[],iterator:0,utc:"",convertType:"",convertValue:"",searchValue:"",searchType:"Name",errors:[],show:0}),watch:{convertType:function(){if(3===this.convertType.length){var a="https://free.currencyconverterapi.com/api/v6/convert?q="+(this.convertType+"_"+this.country.currencies[0].code)+"&compact=y";$.get(a,function(a){var r=Object.values(a);e.convertValue="1 "+e.convertType+" = "+r[0].val.toFixed(2)+" "+e.country.currencies[0].code})}else e.convertValue=""}},computed:{coordinates:function(){var e=Math.round(this.country.latlng[0]),a=Math.round(this.country.latlng[1]);return(e+=e>=0?"°N":"°S")+" "+(a+=a>=0?"°E":"°W")},density:function(){var e=this.country.population,a=this.country.area;return e>0&&a>0?(e/a).toFixed(2):"Unknown"}},filters:{capitalize:function(e){return e?(e=e.toString()).replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}):""},addCommas:function(e){return e?(e=e.toString()).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):""},arrayToString:function(e){var a="";if(0===e.length)a="";else for(var r=0;r<e.length;r++)r===e.length-1?a+=e[r]:a+=e[r]+", ";return a},removeParenthesis:function(e){return e=(e=(e=(e=e.replace(/\s*\(.*?\)\s*/g," ")).replace(/[)]/g,"")).replace(/\s*,\D\s*/g,", ")).replace(/\s*;\s*/g,"; ")}},methods:{validate:function(a){var r;return r=3===e.show?e.compareType:e.searchType,this.errors=[],a||e.errors.push("Input is required."),a.match(".*\\d.*")&&e.errors.push("Letters only."),"Name"!==r&&"Capital"!==r||a.length<3&&e.errors.push("Country names and capital cities must be 4 or more characters."),"Code"===r&&2!=a.length&&e.errors.push("Code must be 2 characters."),!this.errors.length},getData(){var a=0;switch(e.searchValue.toUpperCase()){case"ENGLAND":case"SCOTLAND":case"WALES":e.searchValue="United Kingdom";break;case"SOUTH KOREA":case"KOREA":e.searchValue="Korea (Republic of)";break;case"NORTH KOREA":e.searchValue="Korea (Democratic People's Republic of)";break;case"UNITED STATES":case"UNITED":e.searchValue="United States of America";break;case"IVORY COAST":e.searchValue="Côte d'Ivoire";break;case"EAST TIMOR":e.searchValue="Timor-Leste";break;case"VIETNAM":e.searchValue="Viet Nam";break;case"LAOS":e.searchValue="Lao People's Democratic Republic";break;case"VATICAN":case"VATICAN CITY":e.searchValue="Holy See";break;case"INDIA":case"GUINEA":case"SAMOA":case"SUDAN":a=1}var r=this.$allCountryData.filter(function(a){return"Name"===e.searchType?a.name.toUpperCase().includes(e.searchValue.toUpperCase()):"Code"===e.searchType?a.alpha2Code.toUpperCase().includes(e.searchValue.toUpperCase()):"Capital"===e.searchType?a.capital.toUpperCase().includes(e.searchValue.toUpperCase()):void 0});switch(""!==e.searchValue&&0===r.length?e.errors.push(e.searchValue.toUpperCase()+" is not valid, please ensure spelling and search type are correct."):(e.country.name=r[a].name,e.country.code=r[a].alpha2Code,e.country.flag=r[a].flag,e.country.capital=r[a].capital,e.country.region=r[a].region,e.country.subregion=r[a].subregion,e.country.area=r[a].area,e.country.borders=r[a].borders,e.country.population=r[a].population,e.country.latlng=r[a].latlng,e.country.currencies=r[a].currencies,e.country.languages=r[a].languages,e.country.timezones=r[a].timezones,e.country.wiki="https://en.wikipedia.org/wiki/"+r[a].name,e.utc=moment.utc().format("hh:mmA")),e.country.name){case"Bolivia (Plurinational State of)":e.country.name="Bolivia";break;case"Bonaire, Sint Eustatius and Saba":e.country.name="Bonaire";break;case"Virgin Islands (British)":e.country.name="British Virgin Islands";break;case"Virgin Islands (U.S.)":e.country.name="United States Virgin Islands";break;case"Brunei Darussalam":e.country.name="Brunei";break;case"Cabo Verde":e.country.name="Cape Verde";break;case"Congo (Democratic Republic of the)":case"Congo":e.country.name="Democratic Republic of the Congo";break;case"Falkland Islands (Malvinas)":e.country.name="Falkland Islands";break;case"French Southern Territories":e.country.name="French Southern and Antarctic Lands";break;case"Iran (Islamic Republic of)":e.country.name="Iran";break;case"Lao People's Democratic Republic":e.country.name="Laos";break;case"Macedonia (the former Yugoslav Republic of)":e.country.name="Republic of Macedonia";break;case"Micronesia (Federated States of)":e.country.name="Micronesia";break;case"Moldova (Republic of)":e.country.name="Moldova";break;case"Palestine, State of":e.country.name="Palestine (region)";break;case"Russian Federation":e.country.name="Russia";break;case"Saint Martin (French part)":e.country.name="Saint Martin";break;case"Sint Maarten (Dutch part)":e.country.name="Sint Maarten";break;case"Sao Tome and Principe":e.country.name="São Tomé and Príncipe";break;case"Korea (Republic of)":e.country.name="South Korea";break;case"Korea (Democratic People's Republic of)":e.country.name="North Korea";break;case"Syrian Arab Republic":e.country.name="Syria";break;case"Tanzania, United Republic of":e.country.name="Tanzania";break;case"Timor-Leste":e.country.name="East Timor";break;case"United Kingdom of Great Britain and Northern Ireland":e.country.name="United Kingdom";break;case"United States of America":e.country.name="United States";break;case"Venezuela (Bolivarian Republic of)":e.country.name="Venezuela";break;case"Georgia":e.country.name="Georgia (country)";break;case"Macao":e.country.name="Macau";break;case"Viet Nam":e.country.name="Vietnam";break;case"Côte d'Ivoire":e.country.name="Ivory Coast";break;case"Gambia":e.country.name="The Gambia";break;case"Pitcairn":e.country.name="Pitcairn Islands";break;case"Republic of Kosovo":e.country.name="Kosovo"}if($.ajax({method:"GET",url:"https://en.wikipedia.org/w/api.php",data:{format:"json",action:"query",titles:e.country.name,prop:"extracts",exintro:!0,explaintext:!0,exsentences:4,origin:"*"}}).done(function(a){var r=a.query.pages,t=r[Object.keys(r)[0]].extract;void 0!==t&&""!==t||(t="No description found, please see wiki for more information."),t=e.$options.filters.removeParenthesis(t),e.country.desc=t}),e.errors.length>1)return e.show=0,!1},getMap(){if(e.errors.length>0||""===e.searchValue)return e.errors.push("Input is required."),e.show=0,!1;null!==e.map&&(e.map.off(),e.map.remove()),e.map=L.map("visualMap",{center:[51.505,-.09],zoom:3}),e.map.setView([e.country.latlng[0],e.country.latlng[1]],3),L.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e.map),L.marker([e.country.latlng[0],e.country.latlng[1]]).addTo(e.map).bindPopup(e.country.name).openPopup(),setTimeout(()=>{e.map.invalidateSize()},1500),e.show=2},search:function(a){e.searchValue=e.searchValue.trim();void 0===a?this.searchValue:this.searchValue=a,e.validate(e.searchValue)&&(e.convertType="",e.getData(),setTimeout(function(){e.errors.length<1&&(2!==e.show?e.show=1:setTimeout(function(){e.getMap()},500))},500))},compare(){e.iterator=0,e.compareNames=[],e.comparePops=[],e.compareAreas=[];for(var a=e.compareValue.split(","),r=null,t=0;t<a.length;t++)if(!1===e.validate(a[t].toUpperCase().trim()))return!1;null!==e.chartPop&&null!==e.chartArea&&(e.chartPop.destroy(),e.chartArea.destroy());var o=document.getElementById("chartPop").getContext("2d"),n=document.getElementById("chartArea").getContext("2d");e.chartPop=new Chart(o,{type:"bar",responsive:!0,data:{labels:e.compareNames,datasets:[{label:"Population (Bar)",data:e.comparePops,borderWidth:1,borderColor:"#1a1a1a",hoverBackgroundColor:"rgba(0,0,0,0.5)"},{label:"Population (Line)",data:e.comparePops,type:"line",backgroundColor:"#1a1a1a",borderColor:"#1a1a1a",fill:"transparent"}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(a){return e.$options.filters.addCommas(a)}}}]}}}),e.chartArea=new Chart(n,{type:"bar",responsive:!0,data:{labels:e.compareNames,datasets:[{label:"Area (Bar)",data:e.compareAreas,borderWidth:1,borderColor:"#1a1a1a",hoverBackgroundColor:"rgba(0,0,0,0.5)"},{label:"Area (Line)",data:e.compareAreas,type:"line",backgroundColor:"#1a1a1a",borderColor:"#1a1a1a",fill:"transparent"}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(a){return e.$options.filters.addCommas(a)+" km²"}}}]}}});for(var s=function(){var t=a[e.iterator].toUpperCase().trim();return 0===(r=e.$allCountryData.filter(function(a){return"Names"===e.compareType?a.name.toUpperCase().includes(t):"Codes"===e.compareType?a.alpha2Code.toUpperCase().includes(t):void 0})).length?(e.errors.push(t+" is not valid, please ensure spelling and search type are correct."),!1):-1!==e.compareNames.indexOf(r[0].name)?0:(e.compareNames.push(r[0].name),e.comparePops.push(r[0].population),void e.compareAreas.push(r[0].area))};e.iterator<a.length;)!1!==s()&&(e.chartPop.update(),e.chartArea.update(),$("#compare").find(".desc").css("display","inline")),e.iterator=e.iterator+1},random(){var a=Math.floor(Math.random()*this.$allCountryData.length-1+1),r=this.$allCountryData[a].name;e.searchType="Name",e.search(r)},clear(){null!==e.map&&(e.map.off(),e.map.remove()),null!==e.chartPop&&($("#compare").find(".desc").css("display","none"),e.chartPop.destroy(),e.chartArea.destroy());var a=e.show;Object.assign(this.$data,this.$options.data()),e.show=a<3?0:3}}});$(".expand").on("click",function(){var e=$(this).closest("div");$(this).toggleClass("fa-expand fa-compress"),e.hasClass("col-12")?setTimeout(function(){e.siblings().toggleClass("d-none")},350):e.siblings().toggleClass("d-none"),e.toggleClass("col-lg-6 col-12 px-3")})});